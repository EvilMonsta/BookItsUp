// <auto-generated />
using System;
using BookitUp.Infrastructure;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;
using NpgsqlTypes;

#nullable disable

namespace BookItsUp.DataAccess.Migrations
{
    [DbContext(typeof(BookingDbContext))]
    [Migration("20251020100307_Add_Organizations")]
    partial class Add_Organizations
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.9")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.BookingEntity", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<DateTimeOffset>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at_utc");

                    b.Property<Guid>("CustomerId")
                        .HasColumnType("uuid")
                        .HasColumnName("customer_id");

                    b.Property<DateTimeOffset>("EndUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("end_utc");

                    b.Property<DateTimeOffset?>("HoldExpiresAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("hold_expires_at_utc");

                    b.Property<Guid>("OrganizationId")
                        .HasColumnType("uuid")
                        .HasColumnName("organization_id");

                    b.Property<Guid>("ProviderId")
                        .HasColumnType("uuid")
                        .HasColumnName("provider_id");

                    b.Property<Guid>("ServiceId")
                        .HasColumnType("uuid")
                        .HasColumnName("service_id");

                    b.Property<DateTimeOffset>("StartUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("start_utc");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("status");

                    b.Property<DateTimeOffset>("UpdatedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at_utc");

                    b.Property<NpgsqlRange<DateTimeOffset>>("slot")
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("tstzrange")
                        .HasColumnName("slot")
                        .HasComputedColumnSql("tstzrange(start_utc, end_utc, '[)')", true);

                    b.Property<uint>("xmin")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("xid")
                        .HasColumnName("xmin");

                    b.HasKey("Id")
                        .HasName("pk_bookings");

                    b.HasIndex("OrganizationId")
                        .HasDatabaseName("ix_bookings_organization_id");

                    b.HasIndex("ServiceId")
                        .HasDatabaseName("ix_bookings_service_id");

                    b.HasIndex("CustomerId", "StartUtc")
                        .HasDatabaseName("ix_bookings_customer_id_start_utc");

                    b.HasIndex("ProviderId", "StartUtc")
                        .HasDatabaseName("ix_bookings_provider_id_start_utc");

                    b.ToTable("bookings", (string)null);
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.CustomerEntity", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("Email")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)")
                        .HasColumnName("email");

                    b.Property<string>("FullName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasColumnName("full_name");

                    b.Property<Guid>("OrganizationId")
                        .HasColumnType("uuid")
                        .HasColumnName("organization_id");

                    b.Property<string>("Phone")
                        .HasMaxLength(32)
                        .HasColumnType("character varying(32)")
                        .HasColumnName("phone");

                    b.Property<uint>("xmin")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("xid")
                        .HasColumnName("xmin");

                    b.HasKey("Id")
                        .HasName("pk_customers");

                    b.HasIndex("OrganizationId", "Email")
                        .HasDatabaseName("ix_customers_organization_id_email");

                    b.HasIndex("OrganizationId", "Phone")
                        .HasDatabaseName("ix_customers_organization_id_phone");

                    b.ToTable("customers", (string)null);
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.DailySegmentEntity", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<int>("DayOfWeek")
                        .HasColumnType("integer")
                        .HasColumnName("day_of_week");

                    b.Property<TimeSpan>("EndLocalTime")
                        .HasColumnType("interval")
                        .HasColumnName("end_local_time");

                    b.Property<TimeSpan>("StartLocalTime")
                        .HasColumnType("interval")
                        .HasColumnName("start_local_time");

                    b.Property<Guid>("WeeklyScheduleId")
                        .HasColumnType("uuid")
                        .HasColumnName("weekly_schedule_id");

                    b.HasKey("Id")
                        .HasName("pk_daily_segments");

                    b.HasIndex("WeeklyScheduleId", "DayOfWeek", "StartLocalTime", "EndLocalTime")
                        .IsUnique()
                        .HasDatabaseName("ix_daily_segments_weekly_schedule_id_day_of_week_start_local_t");

                    b.ToTable("daily_segments", (string)null);
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.LocalTimeRangeEntity", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<TimeSpan>("EndLocalTime")
                        .HasColumnType("interval")
                        .HasColumnName("end_local_time");

                    b.Property<Guid>("ScheduleExceptionId")
                        .HasColumnType("uuid")
                        .HasColumnName("schedule_exception_id");

                    b.Property<TimeSpan>("StartLocalTime")
                        .HasColumnType("interval")
                        .HasColumnName("start_local_time");

                    b.HasKey("Id")
                        .HasName("pk_local_time_ranges");

                    b.HasIndex("ScheduleExceptionId", "StartLocalTime", "EndLocalTime")
                        .IsUnique()
                        .HasDatabaseName("ix_local_time_ranges_schedule_exception_id_start_local_time_en");

                    b.ToTable("local_time_ranges", (string)null);
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.OrganizationEntity", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<DateTimeOffset>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at_utc");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasColumnName("is_active");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasColumnName("name");

                    b.Property<string>("TimeZone")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("time_zone");

                    b.HasKey("Id")
                        .HasName("pk_organizations");

                    b.HasIndex("Name")
                        .IsUnique()
                        .HasDatabaseName("ix_organizations_name");

                    b.ToTable("organizations", (string)null);
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.ProviderEntity", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<int>("Capacity")
                        .HasColumnType("integer")
                        .HasColumnName("capacity");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasColumnName("is_active");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasColumnName("name");

                    b.Property<Guid>("OrganizationId")
                        .HasColumnType("uuid")
                        .HasColumnName("organization_id");

                    b.Property<string>("TimeZone")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("time_zone");

                    b.Property<uint>("xmin")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("xid")
                        .HasColumnName("xmin");

                    b.HasKey("Id")
                        .HasName("pk_providers");

                    b.HasIndex("OrganizationId", "Name")
                        .IsUnique()
                        .HasDatabaseName("ix_providers_organization_id_name");

                    b.ToTable("providers", (string)null);
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.ScheduleExceptionEntity", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<DateOnly>("Date")
                        .HasColumnType("date")
                        .HasColumnName("date");

                    b.Property<Guid>("ProviderId")
                        .HasColumnType("uuid")
                        .HasColumnName("provider_id");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("type");

                    b.HasKey("Id")
                        .HasName("pk_schedule_exceptions");

                    b.HasIndex("ProviderId", "Date")
                        .IsUnique()
                        .HasDatabaseName("ix_schedule_exceptions_provider_id_date");

                    b.ToTable("schedule_exceptions", (string)null);
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.ServiceEntity", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<int>("BufferAfterMinutes")
                        .HasColumnType("integer")
                        .HasColumnName("buffer_after_minutes");

                    b.Property<int>("BufferBeforeMinutes")
                        .HasColumnType("integer")
                        .HasColumnName("buffer_before_minutes");

                    b.Property<int>("DurationMinutes")
                        .HasColumnType("integer")
                        .HasColumnName("duration_minutes");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasColumnName("is_active");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasColumnName("name");

                    b.Property<Guid>("OrganizationId")
                        .HasColumnType("uuid")
                        .HasColumnName("organization_id");

                    b.Property<int>("PriceCents")
                        .HasColumnType("integer")
                        .HasColumnName("price_cents");

                    b.Property<uint>("xmin")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("xid")
                        .HasColumnName("xmin");

                    b.HasKey("Id")
                        .HasName("pk_services");

                    b.HasIndex("OrganizationId", "Name")
                        .IsUnique()
                        .HasDatabaseName("ix_services_organization_id_name");

                    b.ToTable("services", (string)null);
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.WeeklyScheduleEntity", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<Guid>("ProviderId")
                        .HasColumnType("uuid")
                        .HasColumnName("provider_id");

                    b.HasKey("Id")
                        .HasName("pk_weekly_schedules");

                    b.HasIndex("ProviderId")
                        .IsUnique()
                        .HasDatabaseName("ix_weekly_schedules_provider_id");

                    b.ToTable("weekly_schedules", (string)null);
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.BookingEntity", b =>
                {
                    b.HasOne("BookItsUp.DataAccess.Entities.CustomerEntity", "Customer")
                        .WithMany("Bookings")
                        .HasForeignKey("CustomerId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("fk_bookings_customers_customer_id");

                    b.HasOne("BookItsUp.DataAccess.Entities.OrganizationEntity", null)
                        .WithMany()
                        .HasForeignKey("OrganizationId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("fk_bookings_organizations_organization_id");

                    b.HasOne("BookItsUp.DataAccess.Entities.ProviderEntity", "Provider")
                        .WithMany("Bookings")
                        .HasForeignKey("ProviderId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("fk_bookings_providers_provider_id");

                    b.HasOne("BookItsUp.DataAccess.Entities.ServiceEntity", "Service")
                        .WithMany("Bookings")
                        .HasForeignKey("ServiceId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("fk_bookings_services_service_id");

                    b.Navigation("Customer");

                    b.Navigation("Provider");

                    b.Navigation("Service");
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.CustomerEntity", b =>
                {
                    b.HasOne("BookItsUp.DataAccess.Entities.OrganizationEntity", null)
                        .WithMany()
                        .HasForeignKey("OrganizationId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("fk_customers_organizations_organization_id");
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.DailySegmentEntity", b =>
                {
                    b.HasOne("BookItsUp.DataAccess.Entities.WeeklyScheduleEntity", "WeeklySchedule")
                        .WithMany("Segments")
                        .HasForeignKey("WeeklyScheduleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("fk_daily_segments_weekly_schedules_weekly_schedule_id");

                    b.Navigation("WeeklySchedule");
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.LocalTimeRangeEntity", b =>
                {
                    b.HasOne("BookItsUp.DataAccess.Entities.ScheduleExceptionEntity", "ScheduleException")
                        .WithMany("LocalTimeRanges")
                        .HasForeignKey("ScheduleExceptionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("fk_local_time_ranges_schedule_exceptions_schedule_exception_id");

                    b.Navigation("ScheduleException");
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.ProviderEntity", b =>
                {
                    b.HasOne("BookItsUp.DataAccess.Entities.OrganizationEntity", null)
                        .WithMany()
                        .HasForeignKey("OrganizationId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("fk_providers_organizations_organization_id");
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.ScheduleExceptionEntity", b =>
                {
                    b.HasOne("BookItsUp.DataAccess.Entities.ProviderEntity", "Provider")
                        .WithMany("ScheduleExceptions")
                        .HasForeignKey("ProviderId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("fk_schedule_exceptions_providers_provider_id");

                    b.Navigation("Provider");
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.ServiceEntity", b =>
                {
                    b.HasOne("BookItsUp.DataAccess.Entities.OrganizationEntity", null)
                        .WithMany()
                        .HasForeignKey("OrganizationId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("fk_services_organizations_organization_id");
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.WeeklyScheduleEntity", b =>
                {
                    b.HasOne("BookItsUp.DataAccess.Entities.ProviderEntity", "Provider")
                        .WithOne("WeeklySchedule")
                        .HasForeignKey("BookItsUp.DataAccess.Entities.WeeklyScheduleEntity", "ProviderId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("fk_weekly_schedules_providers_provider_id");

                    b.Navigation("Provider");
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.CustomerEntity", b =>
                {
                    b.Navigation("Bookings");
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.ProviderEntity", b =>
                {
                    b.Navigation("Bookings");

                    b.Navigation("ScheduleExceptions");

                    b.Navigation("WeeklySchedule");
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.ScheduleExceptionEntity", b =>
                {
                    b.Navigation("LocalTimeRanges");
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.ServiceEntity", b =>
                {
                    b.Navigation("Bookings");
                });

            modelBuilder.Entity("BookItsUp.DataAccess.Entities.WeeklyScheduleEntity", b =>
                {
                    b.Navigation("Segments");
                });
#pragma warning restore 612, 618
        }
    }
}
